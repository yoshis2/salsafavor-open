# OpenSpec: Archive

デプロイされた OpenSpec の変更をアーカイブし、スペックを更新します。

<!-- OPENSPEC:START -->

**ガードレール**

- アーカイブに伴うスペックの更新やドキュメントの記述は、必ず日本語で行ってください。
- まずはシンプルで最小限の実装を優先し、要求された場合や明らかに不可欠な場合にのみ複雑さを追加してください。
- 変更の範囲を、要求された結果に厳密に限定してください。
- OpenSpec の追加の規約や説明が必要な場合は、`openspec/AGENTS.md`（`openspec/` ディレクトリ内にあります。見当たらない場合は `ls openspec` または `openspec update` を実行してください）を参照してください。

**手順**

1. アーカイブする変更 ID を特定します。
   - このプロンプトに特定の変更 ID が含まれている場合（例：スラッシュコマンドの引数によって入力された `<ChangeId>` ブロック内）、空白をトリミングした後のその値を使用します。
   - 会話の中で変更が曖昧に参照されている場合（例：タイトルや概要による参照）、`openspec list` を実行して可能性のある ID を表示し、関連する候補を共有して、ユーザーが意図しているものを確認します。
   - それ以外の場合は、会話を確認し、`openspec list` を実行して、どの変更をアーカイブするかユーザーに尋ねます。続行する前に、確認済みの変更 ID を待ちます。
   - それでも単一の変更 ID を特定できない場合は、停止して、まだ何もアーカイブできないことをユーザーに伝えます。
2. `openspec list`（または `openspec show <id>`）を実行して変更 ID を検証し、変更が見つからない、すでにアーカイブされている、またはアーカイブの準備ができていない場合は停止します。
3. `openspec archive <id> --yes` を実行して、CLI がプロンプトなしで変更を移動し、スペックの更新を適用するようにします（ツールのみの作業の場合は `--skip-specs` のみを使用してください）。
4. コマンドの出力を確認して、ターゲットのスペックが更新され、変更が `changes/archive/` に移動したことを確認します。
5. `openspec validate --strict` で検証し、何かおかしい点があれば `openspec show <id>` で検査します。

**リファレンス**

- アーカイブする前に、`openspec list` を使用して変更 ID を確認してください。
- `openspec list --specs` で更新されたスペックを検査し、引き継ぐ前にバリデーションの問題に対処してください。
<!-- OPENSPEC:END -->
